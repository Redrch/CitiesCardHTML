# 城市卡牌游戏 - 完整使用教程

## 🎯 目录

1. [快速开始](#快速开始)
2. [主持人模式详解](#主持人模式详解)
3. [玩家模式详解](#玩家模式详解)
4. [技能系统使用](#技能系统使用)
5. [战斗系统使用](#战斗系统使用)
6. [城市编辑器使用](#城市编辑器使用)
7. [存档系统使用](#存档系统使用)
8. [常见问题](#常见问题)

---

## 快速开始

### 安装和启动

```bash
# 1. 进入项目目录
cd citycard-vue

# 2. 安装依赖（首次运行）
npm install

# 3. 启动开发服务器
npm run dev

# 4. 在浏览器访问
# 打开 http://localhost:5173
```

### 选择游戏模式

启动后会看到主菜单，有三个选项：

- **玩家模式** - 单人练习或在线匹配
- **主持人模式** - 主持多人游戏
- **技能介绍** - 查看所有技能说明
- **题库查看** - 查看博学多才题库

---

## 主持人模式详解

主持人模式是用于主持线下多人游戏的完整工具。

### 第一步：初始化游戏

1. **选择玩家数量**
   - 2人对战
   - 3人混战
   - 4人组队（2v2）

2. **设置城市数量**
   - 每人3-10个城市
   - 建议：6个城市平衡性最佳

3. **点击「初始化游戏」**
   - 系统自动为每个玩家随机抽取城市
   - 每个玩家获得3个初始金币
   - 游戏开始！

### 第二步：查看玩家信息

**玩家列表面板**显示：
- 玩家名称
- 当前金币数
- 存活城市数 / 总城市数
- 总HP值

**操作按钮**：
- 「查看城市」- 查看该玩家所有城市详情
- 「+3金币」- 给该玩家增加3金币

### 第三步：使用技能系统

点击顶部「显示技能面板」按钮，右侧会出现技能面板。

#### 技能面板使用

1. **选择玩家**
   - 下拉菜单选择要使用技能的玩家

2. **选择技能类型**
   - 战斗技能：在战斗回合使用
   - 非战斗技能：在非战斗阶段使用

3. **查看技能状态**
   - ✅ 绿色背景 = 可用
   - ❌ 灰色 + 文字说明 = 不可用（金币不足/冷却中/次数用尽）

4. **使用技能**
   - 点击技能卡片
   - 点击「使用XXX技能」按钮
   - 系统自动扣除金币和记录使用

#### 技能限制说明

每个技能都有不同的限制：

```javascript
技能名称           金币消耗    冷却回合    使用次数
--------------------------------------------------
铜墙铁壁            10         5          3次
草木皆兵            8          2          无限
城市保护            15         5          2次
设置屏障            20         无         1次
潜能激发            25         无         1次
```

### 第四步：执行战斗

点击顶部「显示战斗面板」按钮。

#### 战斗流程

1. **选择攻击方玩家**
   - 在战斗面板选择玩家A

2. **选择出战城市**
   - 勾选要出战的城市（可多选）
   - 查看城市HP、战力、疲劳状态

3. **确认部署**
   - 点击「确认部署」按钮
   - 系统记录该玩家的出战城市

4. **重复为所有玩家部署**
   - 选择玩家B
   - 勾选城市
   - 确认部署

5. **执行战斗**
   - 点击「执行战斗」按钮
   - 系统自动计算伤害
   - 显示战斗结果

#### 战斗结果展示

战斗结果会以美化的卡片形式显示：

- 📊 **对战双方信息**
  - 攻击力 vs 防御力
  - 出战城市数量

- 🛡️ **护盾处理**
  - 护盾吸收伤害量
  - 护盾反弹伤害量

- 💥 **净伤害**
  - 实际造成的伤害值

- 💀 **摧毁城市**
  - 显示被击败的城市列表

- ✨ **特殊效果**
  - 技能触发的特殊效果

### 第五步：城市编辑器

点击顶部「显示城市编辑」按钮，可以实时编辑城市状态。

#### 编辑功能

**HP编辑**
- 拖动滑块或输入数值
- 点击「满血」快速恢复

**状态编辑**
- 存活/阵亡
- 疲劳
- 在战状态

**技能等级编辑**
- 红色（攻击）：0-10级
- 绿色（防御）：0-10级
- 蓝色（特殊）：0-10级
- 黄色（治疗）：0-10级

**特殊效果**
- 城市保护罩（10回合免疫1次技能）
- 钢铁护盾（免疫2次技能伤害）

**快捷操作**
- 复活城市
- 击杀城市
- 清除加成
- 重置城市

### 第六步：回合管理

#### 下一回合

点击「下一回合」按钮：
- 所有玩家自动获得3金币
- 回合数+1
- 检查游戏是否结束

#### 保存/加载游戏

点击「保存游戏」或「加载游戏」：
- 打开存档管理器
- 选择存档槽位
- 保存或加载进度

### 游戏日志

实时显示所有游戏事件：
- 技能使用记录
- 战斗结果
- 金币变化
- 城市状态变化

---

## 玩家模式详解

玩家模式允许单人练习或在线匹配。

### 阶段1：游戏设置

1. **输入昵称**
   - 必填，用于识别玩家

2. **选择游戏模式**
   - 单机练习：本地游戏
   - 在线匹配：联网对战（开发中）

3. **点击「开始游戏」**

### 阶段2：抽取城市

1. **设置城市数量**
   - 输入3-10之间的数字

2. **点击「开始抽卡」**
   - 系统随机抽取指定数量的城市

3. **选择中心城市**
   - 点击任意城市卡片
   - 被选中的城市高亮显示

4. **点击「确认城市并开始游戏」**

### 阶段3：游戏中

**左侧面板 - 我的城市**
- 查看所有城市状态
- HP、战力、疲劳状态
- 中心城市标记

**左侧面板 - 可用技能**
- 战斗 / 非战斗技能切换
- 实时显示技能可用状态
- 金币消耗提示

**右侧面板 - 游戏日志**
- 查看所有操作记录
- 滚动查看历史

**底部操作栏**
- 查看详情
- 结束回合
- 游戏菜单（保存/继续/重新开始）

---

## 技能系统使用

### 战斗金币技能

#### 擒贼擒王（3金币）
- 效果：本轮优先攻击对手血量最高的城市
- 使用时机：对手有高HP城市时
- 冷却：3回合

#### 草木皆兵（8金币）
- 效果：对手本轮伤害减半
- 使用时机：对手攻击力很高时
- 冷却：2回合

#### 铜墙铁壁（10金币）
- 效果：本轮对手伤害完全无效
- 使用时机：对手蓄力大招时
- 冷却：5回合，限3次

#### 设置屏障（20金币）
- 效果：15000HP护盾，50%吸收+50%反弹，持续5回合
- 使用时机：准备长期防御时
- 限1次使用

#### 潜能激发（25金币）
- 效果：所有城市HP翻倍（上限100000）
- 使用时机：城市HP偏低时
- 限1次使用

### 非战斗金币技能

#### 快速治疗（15金币）
- 效果：一个城市恢复至满血
- 使用时机：重要城市受损时
- 冷却：10回合

#### 城市保护（15金币）
- 效果：10回合内免疫1次技能
- 使用时机：保护关键城市
- 冷却：5回合，限2次

#### 钢铁城市（20金币）
- 效果：免疫2次技能伤害
- 使用时机：预防连续技能攻击
- 冷却：3回合

#### 士气大振（30金币）
- 效果：所有预备城市恢复至满血
- 使用时机：团队HP危机时
- 限1次使用

---

## 战斗系统使用

### 战斗力计算

```
城市战力 = 当前HP + 红色技能加成

红色等级加成：
1级 = +1000
2级 = +1500
3级 = +2250
4级 = +3375
...（每级×1.5倍）
10级 = +38443
```

### 伤害计算

```
1. 攻击方总攻击力 = Σ(出战城市战力)
2. 防御方总防御力 = Σ(绿色技能减伤)
3. 净伤害 = 攻击力 - 防御力
4. 护盾处理（如果有）：
   - 吸收50%伤害
   - 反弹50%伤害给攻击方
5. 伤害分配：
   - 优先攻击血量最低的城市
   - 依次分配直到伤害耗尽
```

### 战斗策略

**进攻策略**
- 多城市出战提高总攻击力
- 使用红色高级城市
- 配合「擒贼擒王」优先击杀关键城市

**防守策略**
- 使用绿色高级城市减伤
- 及时使用「铜墙铁壁」免伤
- 「设置屏障」吸收并反弹伤害

**资源管理**
- 合理分配金币
- 关键回合使用大招
- 保留应急治疗金币

---

## 城市编辑器使用

### 快速修改HP

1. 选择玩家
2. 点击城市卡片展开
3. 拖动HP滑块或输入数值
4. 点击「满血」快速恢复

### 批量操作

**复活所有阵亡城市**
1. 逐个选择阵亡城市
2. 点击「复活城市」
3. 系统自动恢复50% HP

**清除所有加成**
1. 选择有加成的城市
2. 点击「清除加成」
3. 移除所有buff和debuff

### 调试功能

**测试护盾**
1. 勾选「城市保护罩」
2. 设置剩余回合数
3. 保存

**测试技能**
1. 调整红绿蓝黄技能等级
2. 查看战力变化
3. 测试战斗效果

---

## 存档系统使用

### 保存游戏

1. **点击「保存游戏」按钮**
   - 打开存档管理器

2. **选择存档槽位**
   - 5个槽位可选
   - 空槽位点击「保存到此槽位」
   - 已有存档点击「覆盖」

3. **输入存档名称**
   - 默认：时间戳
   - 自定义：如"第10回合存档"

4. **确认保存**
   - 存档信息自动保存到浏览器

### 加载游戏

1. **点击「加载游戏」按钮**

2. **查看存档信息**
   - 存档名称
   - 回合数
   - 玩家数
   - 保存时间

3. **点击「加载」**
   - 确认覆盖当前进度
   - 系统恢复所有状态

### 导出/导入存档

**导出**
1. 点击存档的「导出」按钮
2. 系统下载JSON文件
3. 文件名：`citycard_save_X_时间戳.json`

**导入**
1. 点击空槽位的「导入存档」
2. 选择JSON文件
3. 自动导入到该槽位

### 自动保存

系统在关键节点自动保存：
- 每回合结束
- 战斗执行后
- 技能使用后

加载时点击「加载自动保存」即可恢复。

### 清除所有存档

⚠️ **危险操作**

1. 点击「清除所有存档」
2. 二次确认
3. 删除所有5个槽位+自动保存

---

## 常见问题

### 游戏相关

**Q: 如何获得金币？**
A: 每回合开始时所有玩家自动获得3金币，主持人也可以手动给予。

**Q: 城市疲劳是什么？**
A: 城市参战后会疲劳，战力减半。可使用「越战越勇」技能消除。

**Q: 护盾如何工作？**
A:
- 初始15000HP
- 每回合自动+3000HP（上限15000）
- 吸收50%伤害，反弹50%给攻击方
- 持续5回合或HP耗尽

**Q: 游戏如何判定结束？**
A: 当某个玩家所有城市阵亡时，游戏结束，存活玩家获胜。

### 技术问题

**Q: 存档保存在哪里？**
A: 浏览器的LocalStorage中，清除浏览器数据会丢失存档。

**Q: 如何备份存档？**
A: 使用「导出」功能下载JSON文件到本地。

**Q: 存档不兼容怎么办？**
A: 重大版本更新可能导致存档不兼容，请导出重要存档。

**Q: 如何修改游戏参数？**
A: 在`src/utils/constants.js`中修改技能消耗等参数。

### 操作问题

**Q: 技能按钮是灰色的？**
A: 检查：
- 金币是否足够
- 是否在冷却中
- 使用次数是否用尽

**Q: 战斗没有造成伤害？**
A: 检查：
- 是否选择了出战城市
- 对手是否使用了「铜墙铁壁」
- 防御力是否高于攻击力

**Q: 城市编辑器修改无效？**
A:
- 确保点击了城市卡片展开
- 修改后自动保存
- 刷新页面查看

---

## 附录：快捷键（计划中）

| 按键 | 功能 |
|------|------|
| Space | 下一回合 |
| S | 保存游戏 |
| L | 加载游戏 |
| Ctrl+Z | 撤销操作（计划中） |
| F1 | 打开帮助 |

---

## 技术支持

- GitHub Issues: https://github.com/yourusername/citycard-vue/issues
- 文档位置: `/docs/USER_GUIDE.md`
- API文档: `/docs/API.md`
- 开发者指南: `/MIGRATION_GUIDE.md`

---

**享受游戏！** 🎮✨

如有任何问题或建议，欢迎反馈！
