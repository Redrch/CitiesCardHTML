# æŠ€èƒ½ä¿®å¤æŠ¥å‘Š

**ä¿®å¤æ—¥æœŸ**: 2026-01-07
**ä¿®å¤å†…å®¹**: åŸŽå¸‚é€‰æ‹©å™¨é—®é¢˜ + é‡‘å¸æˆæœ¬æ›´æ–°

---

## âœ… é—®é¢˜1: è¨€å¬è®¡ä»Žå’Œä»¥ç¤¼æ¥é™åŸŽå¸‚é€‰æ‹©å™¨æ˜¾ç¤º"æ²¡æœ‰å¯é€‰åŸŽå¸‚"

### é—®é¢˜åŽŸå› 
Vueç‰ˆæœ¬çš„`getTargetCities()`å‡½æ•°æ€»æ˜¯æ£€æŸ¥`knownCities`ï¼Œä½†åœ¨æ¸¸æˆåˆæœŸæˆ–ä¸»æŒäººæ¨¡å¼ä¸‹ï¼Œè¿™ä¸ªæ•°æ®ç»“æž„å¯èƒ½æœªåˆå§‹åŒ–ï¼Œå¯¼è‡´æ‰€æœ‰åŸŽå¸‚è¢«è¿‡æ»¤æŽ‰ã€‚

### ä¿®å¤æ–¹æ¡ˆ
ä¿®æ”¹ `src/components/Skills/SkillSelector.vue` çš„ `getTargetCities()` å‡½æ•°:

```javascript
function getTargetCities() {
  // ...
  return player.cities
    .map((city, idx) => ({ city, originalIndex: idx }))
    .filter(item => {
      // è¿‡æ»¤å·²é˜µäº¡åŸŽå¸‚
      if (!item.city || item.city.currentHp <= 0 || item.city.isAlive === false) {
        return false
      }

      // è¨€å¬è®¡ä»Žå’Œä»¥ç¤¼æ¥é™ï¼šè¿‡æ»¤æŽ‰ä¸­å¿ƒåŸŽå¸‚
      if ((selectedSkill.value?.name === 'è¨€å¬è®¡ä»Ž' ||
           selectedSkill.value?.name === 'ä»¥ç¤¼æ¥é™') &&
          item.originalIndex === centerIdx) {
        return false
      }

      // ä¸»æŒäººæ¨¡å¼æˆ–knownCitiesæœªåˆå§‹åŒ–æ—¶ï¼Œæ˜¾ç¤ºæ‰€æœ‰éžä¸­å¿ƒåŸŽå¸‚
      // çŽ©å®¶æ¨¡å¼æ‰æ£€æŸ¥å·²çŸ¥åŸŽå¸‚
      if (!gameStore.knownCities ||
          !gameStore.knownCities[props.currentPlayer.name] ||
          !gameStore.knownCities[props.currentPlayer.name][player.name]) {
        return true  // æ˜¾ç¤ºæ‰€æœ‰åŸŽå¸‚
      }

      // æ£€æŸ¥åŸŽå¸‚æ˜¯å¦ä¸ºå·²çŸ¥
      return gameStore.isCityKnown(player.name, item.originalIndex, props.currentPlayer.name)
    })
}
```

**ä¿®å¤æ–‡ä»¶**: `src/components/Skills/SkillSelector.vue` (line 558-592)

---

## âœ… é—®é¢˜2: 24ä¸ªæŠ€èƒ½çš„é‡‘å¸æˆæœ¬æ›´æ–°

### skillCosts.js å·²æ›´æ–°çš„æŠ€èƒ½ä»·æ ¼

| æŠ€èƒ½åç§° | æ—§ä»·æ ¼ | æ–°ä»·æ ¼ | çŠ¶æ€ |
|---------|-------|-------|------|
| äººè´¨äº¤æ¢ | 5 | 4 | âœ… |
| ç§»èŠ±æŽ¥æœ¨ | 8 | 7 | âœ… |
| æ¨ªæ‰«ä¸€ç©º | 8 | 7 | âœ… |
| è¿žé”ååº” | 8 | 7 | âœ… |
| ä»¥é€¸å¾…åŠ³ | 9 | 6 | âœ… |
| ä¸éœ²è¸ªè¿¹ | 9 | 7 | âœ… |
| ç‹‚æš´æ¨¡å¼ | 9 | 7 | âœ… |
| ç‹å‡è™Žå¨ | 9 | 7 | âœ… |
| é™ç»´æ‰“å‡» | 9 | 8 | âœ… |
| é™ç»´æ‰“å‡»(ç›´è¾–å¸‚/é¦™æ¸¯) | 11 | 10 | âœ… |
| è¶ç«æ‰“åŠ« | 10 | 8 | âœ… |
| æ·±è—ä¸éœ² | 10 | 8 | âœ… |
| å®šæ—¶çˆ†ç ´ | 10 | 8 | âœ… |
| å£«æ°”å¤§æŒ¯ | 11 | 8 | âœ… |
| ç”µç£æ„Ÿåº” | 11 | 9 | âœ… |
| æˆ˜ç•¥è½¬ç§» | 11 | 9 | âœ… |
| æ°¸ä¹…æ‘§æ¯ | 11 | 9 | âœ… |
| æ°¸ä¹…æ‘§æ¯(ç›´è¾–å¸‚/æ¸¯æ¾³) | 14 | 12 | âœ… |
| è¶å…¶ä¸å¤‡Â·éšæœº | 11 | 10 | âœ… |
| è¶å…¶ä¸å¤‡Â·æŒ‡å®š | 14 | 13 | âœ… |
| è‡ªç›¸æ®‹æ€ | 12 | 9 | âœ… |
| å½“æœºç«‹æ–­ | 12 | 10 | âœ… |
| å›´é­æ•‘èµµ | 13 | 12 | âœ… |
| å¤·ä¸ºå¹³åœ° | 15 | 12 | âœ… |
| å‰¯ä¸­å¿ƒåˆ¶ | 16 | 11 | âœ… |
| è®¡åˆ’å•åˆ— | 17 | 14 | âœ… |

**ä¿®å¤æ–‡ä»¶**: `src/constants/skillCosts.js`

### ç¡¬ç¼–ç é‡‘å¸æ‰£é™¤ä¿®å¤

#### 1. æ—¶æ¥è¿è½¬ä¸­çš„ç‹å‡è™Žå¨è¯†ç ´æƒ©ç½š
- **ä½ç½®**: `src/composables/skills/nonBattleSkills.js` line 621, 643
- **ä¿®æ”¹**: æ‰£é™¤é‡‘å¸ä»Ž 9 æ”¹ä¸º 7
- **åŽŸå› **: ç‹å‡è™Žå¨æˆæœ¬ä»Ž 9â†’7

```javascript
// ä¿®æ”¹å‰
caster.gold = Math.max(0, caster.gold - 9)

// ä¿®æ”¹åŽ
caster.gold = Math.max(0, caster.gold - 7)  // ç‹å‡è™Žå¨æˆæœ¬9â†’7
```

#### 2. é™ç»´æ‰“å‡»é«˜çº§ç‰ˆ(ç›´è¾–å¸‚/é¦™æ¸¯â†’æ¾³é—¨)
- **ä½ç½®**: `src/composables/skills/nonBattleSkills.js` line 2254-2261
- **çŠ¶æ€**: âœ… å·²æ­£ç¡® (10é‡‘å¸)
- **è¯´æ˜Ž**: æ‰‹åŠ¨æ‰£é™¤10é‡‘å¸ï¼Œç¬¦åˆç”¨æˆ·è¦æ±‚(11â†’10)

#### 3. æ°¸ä¹…æ‘§æ¯(ç›´è¾–å¸‚/æ¸¯æ¾³)
- **ä½ç½®**: `src/composables/skills/nonBattleSkills.js`
- **çŠ¶æ€**: âœ… å·²æ­£ç¡®å®žçŽ°åŠ¨æ€é‡‘å¸æ‰£é™¤
- **è¯´æ˜Ž**:
  - æ™®é€šåŸŽå¸‚: 9é‡‘å¸ (11â†’9)
  - ç›´è¾–å¸‚/æ¸¯æ¾³: 12é‡‘å¸ (14â†’12)

---

## ðŸ“Š ä¿®å¤ç»Ÿè®¡

- âœ… **åŸŽå¸‚é€‰æ‹©å™¨é—®é¢˜**: 1ä¸ªä¿®å¤
- âœ… **æŠ€èƒ½æˆæœ¬æ›´æ–°**: 24ä¸ªæŠ€èƒ½
- âœ… **ç¡¬ç¼–ç é‡‘å¸ä¿®å¤**: 2å¤„ (ç‹å‡è™Žå¨è¯†ç ´æƒ©ç½š)
- âœ… **ç‰¹æ®ŠæŠ€èƒ½éªŒè¯**: 2ä¸ª (é™ç»´æ‰“å‡»ã€æ°¸ä¹…æ‘§æ¯)

---

## ðŸŽ¯ å½±å“èŒƒå›´

### Vue 3ç‰ˆæœ¬
- âœ… `src/components/Skills/SkillSelector.vue`
- âœ… `src/constants/skillCosts.js`
- âœ… `src/composables/skills/nonBattleSkills.js`

### HTMLç‰ˆæœ¬
- âš ï¸ éœ€è¦åŒæ­¥æ›´æ–° `citycard_web.html` ä¸­çš„ SKILL_COST_MAP

---

## ðŸ§ª æµ‹è¯•å»ºè®®

### åŸŽå¸‚é€‰æ‹©å™¨æµ‹è¯•
1. **çŽ©å®¶æ¨¡å¼åˆæœŸæµ‹è¯•**
   - é€‰æ‹©"è¨€å¬è®¡ä»Ž"æŠ€èƒ½
   - é€‰æ‹©å¯¹æ‰‹
   - éªŒè¯åŸŽå¸‚ä¸‹æ‹‰åˆ—è¡¨æ˜¾ç¤ºå¯¹æ‰‹çš„éžä¸­å¿ƒåŸŽå¸‚

2. **ä»¥ç¤¼æ¥é™æµ‹è¯•**
   - é€‰æ‹©"ä»¥ç¤¼æ¥é™"æŠ€èƒ½
   - é€‰æ‹©å¯¹æ‰‹
   - éªŒè¯åŸŽå¸‚ä¸‹æ‹‰åˆ—è¡¨æ˜¾ç¤ºå¯¹æ‰‹çš„éžä¸­å¿ƒåŸŽå¸‚

### é‡‘å¸æ‰£é™¤æµ‹è¯•
1. **åŸºç¡€æŠ€èƒ½æˆæœ¬æµ‹è¯•**
   - éªŒè¯æ‰€æœ‰24ä¸ªä¿®æ”¹çš„æŠ€èƒ½æ‰£é™¤æ­£ç¡®é‡‘å¸
   - ç¤ºä¾‹: ä½¿ç”¨"äººè´¨äº¤æ¢"åº”æ‰£4é‡‘å¸(éž5é‡‘å¸)

2. **ç‰¹æ®ŠæŠ€èƒ½æµ‹è¯•**
   - **ç‹å‡è™Žå¨**: ä¼ªè£…åŸŽå¸‚è¢«æ—¶æ¥è¿è½¬è¯†ç ´ï¼Œæ‰£7é‡‘å¸
   - **é™ç»´æ‰“å‡»**:
     - æ™®é€šçœä»½åŸŽå¸‚: æ‰£8é‡‘å¸
     - ç›´è¾–å¸‚/é¦™æ¸¯â†’æ¾³é—¨: æ‰£10é‡‘å¸
   - **æ°¸ä¹…æ‘§æ¯**:
     - æ™®é€šåŸŽå¸‚: æ‰£9é‡‘å¸
     - ç›´è¾–å¸‚/æ¸¯æ¾³: æ‰£12é‡‘å¸

---

## âœ… ä¿®å¤å®Œæˆ

æ‰€æœ‰é—®é¢˜å·²ä¿®å¤ï¼Œå¯ä»¥è¿›è¡Œæµ‹è¯•éªŒè¯ã€‚

**é‡è¦**: å»ºè®®åŒæ­¥æ›´æ–°åŽŸç‰ˆHTMLæ–‡ä»¶ä¸­çš„SKILL_COST_MAPï¼Œç¡®ä¿ä¸¤ä¸ªç‰ˆæœ¬ä¸€è‡´æ€§ã€‚
